var datso=jQuery.noConflict();datso(document).ready(function(){datso("textarea.resizable:not(.processed)").TextAreaResizer()});datso(document).ready(function(){datso(".fader").children().hover(function(){datso(this).siblings().stop().fadeTo(500,0.5)},function(){datso(this).siblings().stop().fadeTo(500,1)})});datso(document).ready(function(){datso(".pane:even").addClass("alt");datso(".pane .btn-unapprove").click(function(){datso(this).parents(".pane").animate({backgroundColor:"#fff568"},"fast").animate({backgroundColor:"#FFFFE0"},"slow").addClass("spam");return false});datso(".pane .btn-approve").click(function(){datso(this).parents(".pane").animate({backgroundColor:"#dafda5"},"fast").animate({backgroundColor:"#EDFED3"},"slow").removeClass("spam");return false});datso(".pane .btn-spam").click(function(){datso(this).parents(".pane").animate({backgroundColor:"#fbc7c7"},"fast").animate({opacity:"hide"},"slow");return false})});datso(document).ready(function(){datso("#dgcaptchaval").attr("autocomplete","off")});datso(document).ready(function(){datso("#addtobasket").click(function(){var c=datso(this).attr("class");var d="id="+c;datso(this).css({opacity:"0.4"},50);datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=addtobasket&format=raw",data:d,cache:false,success:function(a){update_subtotal();datso(".dg_slider").html(a);if(datso(".dg_slider").is(":hidden")){datso(".dg_slider").html(a).show()}else{datso(".dg_slider").html(a)}if(datso(".dg_head_background").is(":hidden")){datso(".dg_head_background").show()}else{datso(".dg_head_background")}}});return false})});datso(document).ready(function(){datso(".btn-delete").click(function(){var d=confirm("This comment will be deleted!");if(d){var b=datso(this).parent().parent();datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=deletecomment&format=raw",data:"cmtid="+b.attr("id"),cache:false,success:function(){datso(b).animate({backgroundColor:"#fbc7c7"},"fast").animate({opacity:"hide"},"slow");return false}})}return false});datso(".btn-approve").click(function(){var b=datso(this).parent().parent();datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=approvecomment&format=raw",data:"cmtid="+b.attr("id"),cache:false})});datso(".btn-unapprove").click(function(){var b=datso(this).parent().parent();datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=unapprovecomment&format=raw",data:"cmtid="+b.attr("id"),cache:false})});datso(".btn-spam").click(function(){var b=datso(this).parent().parent();datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=spamcomment&format=raw",data:"cmtid="+b.attr("id"),cache:false})})});datso(document).ready(function(){datso("#btn-submit").dgComments(siteurl+"index.php?option=com_datsogallery&task=commentadd&format=raw")});datso(document).ready(function(){datso(".add_favorite").mouseover(function(){datso(this).addClass("add_favorite_hover")});datso(".add_favorite").mouseout(function(){datso(this).removeClass("add_favorite_hover")})});datso(document).ready(function(){datso(".dgtip").dgtooltip({gravity:"s",fade:true,html:true})});datso(document).ready(function(){datso("#refr").hide();datso("#usercat").hide();datso("#imagefields").hide();datso("#create_dg_btn").click(function(){datso("#catname").show();datso.post(siteurl+"index.php?option=com_datsogallery&task=checkcatname&format=raw",{name:datso("#name").val(),description:datso("#description").val()},function(b){if(b=="maxcat"){datso("#ucattip").hide();datso("#name").addClass("error");datso("#maxcaterr").blinky({count:3}).done(function(){datso("#maxcaterr").delay(6000).fadeOut("slow");datso("#name").removeClass("error");datso("#ucattip").delay(6800).fadeIn()});return false}else{if(b=="exist"){datso("#ucattip").hide();datso("#name").addClass("error");datso("#nameerr").blinky({count:3}).done(function(){datso("#nameerr").delay(6000).fadeOut("slow");datso("#name").removeClass("error");datso("#ucattip").delay(6800).fadeIn()});return false}else{datso("#name").val("");datso("#description").val("");datso("#usercat").hide();datso("#catnames").hide();datso("#res").html(b);datso("#imagefields").slideDown("slow")}}});return false})});datso(document).ready(function(){datso(".favorite").click(function(){var f=datso(this).attr("id");var d="id="+f;var e=datso(this);datso(this).css({opacity:"0.4"},50);datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=addtofavorites&format=raw",data:d,cache:false,success:function(a){e.html(a);e.animate({opacity:"1.0"},300)}});return false})});datso(document).ready(function(){datso("#newtag").attr("autocomplete","off");datso("#btnaddtag").click(function(){var b=datso("input[name=newtag]");var a="&newtag="+b.val()+"&id="+imgid;datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=addtag&format=raw",data:a,cache:false,beforeSend:function(){datso(".addtag_loading").show()},complete:function(){datso(".addtag_loading").fadeToggle("fast","linear")},success:function(c){if(c==1){datso("#tagsmax").slideToggle("fast",function(){datso("#tagsmax").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(c==2){datso("#tagserror").slideToggle("fast",function(){datso("#tagserror").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(c==3){datso("#tagsmin").slideToggle("fast",function(){datso("#tagsmin").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(c==4){datso("#tagsdbl").slideToggle("fast",function(){datso("#tagsdbl").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{datso("#tagchecklist").html(c)}}}}datso("#newtag").val("")}})});datso("#newtag").keypress(function(b){code=b.which?b.which:b.keyCode;if(code.toString()==13){b.preventDefault();var c=datso("input[name=newtag]");var a="&newtag="+c.val()+"&id="+imgid;datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=addtag&format=raw",data:a,cache:false,beforeSend:function(){datso(".addtag_loading").show()},complete:function(){datso(".addtag_loading").fadeToggle("fast","linear")},success:function(d){if(d==1){datso("#tagsmax").slideToggle("fast",function(){datso("#tagsmax").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(d==2){datso("#tagserror").slideToggle("fast",function(){datso("#tagserror").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(d==3){datso("#tagsmin").slideToggle("fast",function(){datso("#tagsmin").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{if(d==4){datso("#tagsdbl").slideToggle("fast",function(){datso("#tagsdbl").show();datso(this).animate({opacity:"1.0"},3000,function(){datso(this).slideToggle("fast")})})}else{datso("#tagchecklist").html(d)}}}}datso("#newtag").val("")}})}});datso("#dgtag").click(function(){datso("#tagsform").fadeToggle("fast","linear")});datso("div.deltag").click(function(c){c.preventDefault();var a=datso(this).attr("id");var b=datso(this).parent();datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=removetag&format=raw",data:"&tagid="+a+"&id="+imgid,success:function(){b.fadeToggle("fast","linear",function(){b.remove()})}})})});(function(a){a.fn.dgComments=function(b){a(this).click(function(){var g=a("#cmtpic").val();var f=a("#cmtname").val();var e=a("#cmtmail").val();var d=a("#cmttext").val();var h=a("#dgcaptchaval").val();var c="cmtpic="+g+"&cmtname="+f+"&cmtmail="+e+"&cmttext="+d+"&dgcaptchaval="+h;a.ajax({type:"post",url:b,data:c,cache:false,success:function(j){dgCaptcha();var i=a("ul#list li:last").attr("class");if(i=="dg_body_error_message"){a("ul#list li:last").remove()}a("div#nocom").replaceWith("<ul id='list'></ul>");a("ul#list").append(j);var i=a("ul#list li:last").attr("class");if(i=="dg_body_error_message"){a("ul#list li:last").hide().slideDown(400,function(){a(this).animate({opacity:"1.0"},5000,function(){a(this).slideUp(150)})})}}});return false})}})(datso);(function(b){var i,j;var e=0;var c=32;var f;b.fn.TextAreaResizer=function(){return this.each(function(){i=b(this).addClass("processed"),j=null;b(this).wrap('<div class="resizable-textarea"><span></span></div>').parent().append(b('<div class="grippie"></div>').bind("mousedown",{el:this},d));var k=b("div.grippie",b(this).parent())[0];k.style.marginRight=(k.offsetWidth-b(this)[0].offsetWidth)+"px"})};function d(k){i=b(k.data.el);i.blur();e=a(k).y;j=i.height()-e;i.css("opacity",0.25);b(document).mousemove(h).mouseup(g);return false}function h(l){var m=a(l).y;var k=j+m;if(e>=(m)){k-=5}e=m;k=Math.max(c,k);i.height(k+"px");if(k<c){g(l)}return false}function g(k){b(document).unbind("mousemove",h).unbind("mouseup",g);i.css("opacity",1);i.focus();i=null;j=null;e=0}function a(k){return{x:k.clientX+document.documentElement.scrollLeft,y:k.clientY+document.documentElement.scrollTop}}})(datso);function vote(g,k,b,j,d){var l=window.location;var a=l.protocol+"//"+l.host+sfolder;var c=theme;var h;var f=document.getElementById("vote_"+g);f.innerHTML='<img src="'+a+"/components/com_datsogallery/images/"+c+'/loading.gif" border="0" style="height:10px" /> '+vote_msg[1];try{h=new XMLHttpRequest()}catch(t){try{h=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){alert(vote_msg[0]);return false}}}h.onreadystatechange=function(){var e;if(h.readyState==4){setTimeout(function(){e=h.responseText;if(e=="thanks"){f.innerHTML='<span style="vote-msg-thanks">'+vote_msg[2]+"</span>"}if(e=="voted"){f.innerHTML='<span class="vote-msg-voted">'+vote_msg[3]+"</span>"}},1000);setTimeout(function(){if(e=="thanks"){var m=j+1;var i=((b+k)/(m));document.getElementById("rating_"+g).style.width=parseInt(i*20)+"%"}if(d!=0){if(e=="thanks"){if(m!=1){var n=vote_msg[4]+": "+m}else{var n=vote_msg[5]+": "+m}f.innerHTML='<span class="vote-msg">( '+n+" )</span>"}else{if(j!=0||d!=-1){if(j!=1){var o=vote_msg[4]+": "+j}else{var o=vote_msg[5]+": "+j}f.innerHTML='<span class="vote-msg">( '+o+" )</span>"}else{f.innerHTML=""}}}else{f.innerHTML=""}},2000)}};h.open("GET",a+"/index.php?option=com_datsogallery&task=vote&rating="+k+"&id="+g+"&format=raw",true);h.send(null)}(function(d){d.fn.editInPlace=function(e){var f=d.extend({},d.fn.editInPlace.defaults,e);b(f.saving_image);return this.each(function(){var g=d(this);if(g.data("editInPlace")){return}g.data("editInPlace",true);new c(f,g).init()})};d.fn.editInPlace.defaults={url:"",bg_img_over:"",bg_img_out:"",hover_class:"",show_buttons:false,save_button:'<button class="inplace_save">Save</button>',cancel_button:'<button class="inplace_cancel">Cancel</button>',params:"",field_type:"text",default_text:"(Click here to add text)",textarea_rows:10,textarea_cols:25,select_text:"Choose new value",select_options:"",saving_text:"Saving...",saving_image:"",value_required:false,element_id:"element_id",update_value:"update_value",original_html:"original_html",save_if_nothing_changed:false,on_blur:"save",callback:null,success:null,error:function(e){this.reportError("Failed to save value: "+e.responseText||"Unspecified Error")},error_sink:function(e,f){alert(f)}};function c(e,f){this.settings=e;this.dom=f;this.originalHTML=null;this.originalText=null;this.didInsertDefaultText=false}d.fn.editInPlace.InlineEditor=c;d.extend(c.prototype,{init:function(){this.setDefaultTextIfNeccessary();this.connectEvents()},setDefaultTextIfNeccessary:function(){if(""!==this.dom.html()){return}this.dom.html(this.settings.default_text);this.didInsertDefaultText=true},connectEvents:function(){var e=this;this.dom.bind("mouseenter.editInPlace",function(){e.mouseEnter()}).bind("mouseleave.editInPlace",function(){e.mouseLeave()}).bind("click.editInPlace",function(){e.handleClickOnClosedEditor()})},mouseEnter:function(){this.addHover()},mouseLeave:function(){this.removeHover()},addHover:function(){if(this.settings.hover_class){this.dom.addClass(this.settings.hover_class)}else{this.dom.css("background",this.settings.bg_img_over)}},removeHover:function(){if(this.settings.hover_class){this.dom.removeClass(this.settings.hover_class)}else{this.dom.css("background",this.settings.bg_img_out)}},handleClickOnClosedEditor:function(){this.dom.unbind(".editInPlace");this.removeHover();if(this.didInsertDefaultText&&this.dom.html()===this.settings.default_text){this.dom.html("");this.didInsertDefaultText=false}this.originalHTML=this.dom.html();this.originalText=a(this.dom.text());this.replaceContentWithEditor();this.connectEventsToEditor()},replaceContentWithEditor:function(){var f=(this.settings.show_buttons)?'<div style="padding-top:10px">'+this.settings.save_button+" "+this.settings.cancel_button+"</div>":"";var e=this.createEditorElement();this.dom.html('<form class="inplace_form" style="display: inline; margin: 0; padding: 0;border-top:1px solid #ccc"></form>').find("form").append(e).append(f)},createEditorElement:function(){if(-1===d.inArray(this.settings.field_type,["text","textarea","select"])){throw"Unknown field_type <fnord>, supported are 'text', 'textarea' and 'select'"}if("select"===this.settings.field_type){return this.createSelectEditor()}var e=null;if("text"===this.settings.field_type){e=d('<input style="padding:2px" size="40" type="text"'+this.inputNameAndClass()+"/>")}else{if("textarea"===this.settings.field_type){e=d("<textarea"+this.inputNameAndClass()+'rows="'+this.settings.textarea_rows+'" cols="'+this.settings.textarea_cols+'" style="width:99%"></textarea>')}}e.val(this.originalText);return e},inputNameAndClass:function(){return' name="inplace_value" class="inplace_field" '},createSelectEditor:function(){var m=d("<select"+this.inputNameAndClass()+'><option disabled="true" value="">'+this.settings.select_text+"</option></select>");var k=this.settings.select_options;if(!d.isArray(k)){k=k.split(",")}for(var g=0;g<k.length;g++){var f=k[g];if(!d.isArray(f)){f=f.split(":")}var l=a(f[1]||f[0]);var e=a(f[0]);var j=(l==this.originalText)?'selected="selected" ':"";var h=d("<option "+j+" ></option>").val(l).text(e);m.append(h)}return m},connectEventsToEditor:function(){var h=this;function g(){h.handleCancelEditor();return false}function e(){h.handleSaveEditor();return false}var f=this.dom.find("form");f.find(".inplace_field").focus().select();f.find(".inplace_cancel").click(g);f.find(".inplace_save").click(e);if(!this.settings.show_buttons){if("save"===this.settings.on_blur){f.find(".inplace_field").blur(e)}else{f.find(".inplace_field").blur(g)}if(d.browser.mozilla){f.keyup(function(i){if(13===i.which){e()}})}}f.keyup(function(i){if(27===i.which){return g()}});f.submit(e)},handleCancelEditor:function(){this.init();this.dom.html(this.originalHTML)},handleSaveEditor:function(){var e=this.dom.find(":input").val();if(this.isDisabledDefaultSelectChoice()||this.isUnchangedInput(e)){this.handleCancelEditor();return}if(this.settings.value_required&&(""===e||undefined===e)){this.dom.html(this.originalHTML);this.init();this.reportError("Error: You must enter a value to save this field");return}this.showSavingMessage();if(this.settings.callback){this.handleSubmitToCallback(e)}else{this.handleSubmitToServer(e)}},isDisabledDefaultSelectChoice:function(){return this.dom.find("option").eq(0).is(":selected:disabled")},isUnchangedInput:function(e){return !this.settings.save_if_nothing_changed&&this.originalText===e},showSavingMessage:function(){var e=this.settings.saving_text;if(""!==this.settings.saving_image){e='<div style="display:inline;text-align:center"><img src="'+this.settings.saving_image+'" alt="Saving..." /></div>'}this.dom.html(e)},handleSubmitToCallback:function(e){var f=this.settings.callback(this.id(),e,this.originalHTML,this.settings.params);this.init();if(undefined===f){this.reportError("Error: Failed to save value: "+e);this.dom.html(this.originalHTML);return}this.dom.html(f)},handleSubmitToServer:function(g){var f=this.settings.update_value+"="+encodeURIComponent(g)+"&"+this.settings.element_id+"="+this.dom.attr("id")+((""!==this.settings.params)?"&"+this.settings.params:"")+"&"+this.settings.original_html+"="+encodeURIComponent(this.originalHTML);var e=this;d.ajax({url:e.settings.url,type:"POST",data:f,dataType:"html",complete:function(h){e.init()},success:function(i){var h=i||e.settings.default_text;e.dom.html(h);if(e.settings.success){e.settings.success.apply(e,[i,e.dom])}},error:function(h){e.dom.html(e.originalHTML);if(e.settings.error){e.settings.error.apply(e,[h,e.dom])}}})},reportError:function(e){if(this.settings.error_sink){this.settings.error_sink.apply(this,[this.id(),e])}},id:function(){return this.dom.attr("id")},missingCommaErrorPreventer:""});function b(f){if(""===f){return}var e=new Image();e.src=f}function a(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}})(datso);function update_subtotal(){var b=datso("#subtotal");datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=subtotal&format=raw",cache:false,success:function(a){b.html(a);update_items()}})}function update_total(){var c=datso("#total");var d=datso("input[name='amount']");datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=total&format=raw",cache:false,success:function(a){c.html(a);d.val(a)}})}function update_items(){var b=datso("#items");datso.ajax({type:"post",url:siteurl+"index.php?option=com_datsogallery&task=updateitems&format=raw",cache:false,success:function(a){b.html(a)}})}function dgCaptcha(b){if(!b){b=siteurl+"index.php?option=com_datsogallery&task=captcha&format=raw"}document.getElementById("dgcaptcha").src=b+"&"+Math.random();document.getElementById("dgcaptchaval").value="";document.getElementById("dgcaptchaval").focus()}(function(b){b.fn.blinky=function(l){var h={frequency:1000,count:-1};l=b.extend(true,h,l);var k=0;var i=this;var a=b.Deferred();function j(){if(i.length==0){return a.reject()}if(k==l.count){return a.resolve()}k++;b(i).fadeOut().fadeIn();setTimeout(j,l.frequency)}j();return a.promise()}})(datso);function userCat(c){datso("#imagefields").hide();var d=document.getElementById("usercat");d.style.display=c=="usercat"?"table-row":"none";if(c!=""&&c!="usercat"){datso("#imagefields").delay(50).fadeIn().slideDown(300)}return false}function toggleStatus(){if(datso("#toggleElement").is(":checked")){datso("#enable_dg_btn:button").removeAttr("disabled")}else{datso("#enable_dg_btn:button").attr("disabled",true)}}(function(e){e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(a,b){e.fx.step[b]=function(c){if(c.state==0){c.start=f(c.elem,b);c.end=g(c.end)}c.elem.style[b]="rgb("+[Math.max(Math.min(parseInt((c.pos*(c.end[0]-c.start[0]))+c.start[0]),255),0),Math.max(Math.min(parseInt((c.pos*(c.end[1]-c.start[1]))+c.start[1]),255),0),Math.max(Math.min(parseInt((c.pos*(c.end[2]-c.start[2]))+c.start[2]),255),0)].join(",")+")"}});function g(a){var b;if(a&&a.constructor==Array&&a.length==3){return a}if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a)){return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])]}if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a)){return[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55]}if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a)){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a)){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}return h[e.trim(a).toLowerCase()]}function f(a,c){var b;do{b=e.curCSS(a,c);if(b!=""&&b!="transparent"||e.nodeName(a,"body")){break}c="backgroundColor"}while(a=a.parentNode);return g(b)}var h={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(datso);