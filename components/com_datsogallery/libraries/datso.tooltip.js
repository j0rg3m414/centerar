var datso=jQuery.noConflict();(function(datso){datso.fn.dgtooltip=function(options){options=datso.extend({},datso.fn.dgtooltip.defaults,options);return this.each(function(){var opts=datso.fn.dgtooltip.elementOptions(this,options);datso(this).hover(function(){datso.data(this,'cancel.dgtooltip',true);var tip=datso.data(this,'active.dgtooltip');if(!tip){tip=datso('<div class="dgtooltip"><div class="dgtooltip-outer"><div class="dgtooltip-inner"/></div></div>');tip.css({position:'absolute',zIndex:100000});datso.data(this,'active.dgtooltip',tip);}
if(datso(this).attr('title')||typeof(datso(this).attr('original-title'))!='string'){datso(this).attr('original-title',datso(this).attr('title')||'').removeAttr('title');}
var title;if(typeof opts.title=='string'){title=datso(this).attr(opts.title=='title'?'original-title':opts.title);}else if(typeof opts.title=='function'){title=opts.title.call(this);}
tip.find('.dgtooltip-inner')[opts.html?'html':'text'](title||opts.fallback);var pos=datso.extend({},datso(this).offset(),{width:this.offsetWidth,height:this.offsetHeight});tip.get(0).className='dgtooltip';tip.remove().css({top:0,left:0,visibility:'hidden',display:'block'}).appendTo(document.body);var actualWidth=tip[0].offsetWidth,actualHeight=tip[0].offsetHeight;var gravity=(typeof opts.gravity=='function')?opts.gravity.call(this):opts.gravity;switch(gravity.charAt(0)){case'n':tip.css({top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}).addClass('dgtooltip-north');break;case's':tip.css({top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}).addClass('dgtooltip-south');break;case'e':tip.css({top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}).addClass('dgtooltip-east');break;case'w':tip.css({top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}).addClass('dgtooltip-west');break;}
if(opts.fade){tip.css({opacity:0,display:'block',visibility:'visible'}).animate({opacity:1});}else{tip.css({visibility:'visible'});}},function(){datso.data(this,'cancel.dgtooltip',false);var self=this;setTimeout(function(){if(datso.data(this,'cancel.dgtooltip'))return;var tip=datso.data(self,'active.dgtooltip');if(opts.fade){tip.stop().fadeOut(function(){datso(this).remove();});}else{tip.remove();}},100);});});};datso.fn.dgtooltip.elementOptions=function(ele,options){return datso.metadata?datso.extend({},options,datso(ele).metadata()):options;};datso.fn.dgtooltip.defaults={fade:true,fallback:'',gravity:'s',html:true,title:'id'};datso.fn.dgtooltip.autoNS=function(){return datso(this).offset().top>(datso(document).scrollTop()+datso(window).height()/2)?'s':'n';};datso.fn.dgtooltip.autoWE=function(){return datso(this).offset().left>(datso(document).scrollLeft()+datso(window).width()/2)?'e':'w';};})(datso);